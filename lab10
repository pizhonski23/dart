import 'package:flutter/material.dart';

void main() {
  runApp(const SingersApp());
}

class SingersApp extends StatelessWidget {
  const SingersApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Українські співаки',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        useMaterial3: true,
      ),
      home: const SingersListScreen(),
      debugShowCheckedModeBanner: false,
    );
  }
}

// Клас для зберігання даних про співака
class Singer {
  final String name;
  final String genre;
  final String description;
  final String imageUrl;
  final String years;
  final List<String> hits;

  const Singer({
    required this.name,
    required this.genre,
    required this.description,
    required this.imageUrl,
    required this.years,
    required this.hits,
  });
}

class SingersListScreen extends StatefulWidget {
  const SingersListScreen({super.key});

  @override
  State<SingersListScreen> createState() => _SingersListScreenState();
}

class _SingersListScreenState extends State<SingersListScreen> {
  // Список українських співаків
  final List<Singer> singers = [
    Singer(
      name: 'Святослав Вакарчук',
      genre: 'Рок, поп-рок',
      description: 'Лідер гурту "Океан Ельзи", музикант, політик',
      imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Sviatoslav_Vakarchuk_2019.jpg/300px-Sviatoslav_Vakarchuk_2019.jpg',
      years: 'нар. 1975',
      hits: ['Обійми', 'Без бою', 'Не йди'],
    ),
    Singer(
      name: 'Джамала',
      genre: 'Джаз, поп, соул',
      description: 'Переможниця Євробачення 2016',
      imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Jamala_2017.jpg/300px-Jamala_2017.jpg',
      years: 'нар. 1983',
      hits: ['1944', 'Залишаюсь', 'Smile'],
    ),
    Singer(
      name: 'Тіна Кароль',
      genre: 'Поп, поп-рок',
      description: 'Співачка, акторка, телеведуча',
      imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Tina_Karol_2017.jpg/300px-Tina_Karol_2017.jpg',
      years: 'нар. 1985',
      hits: ['Вище неба', 'Перечекати', 'Сила высоты'],
    ),
    Singer(
      name: 'Надія Дорофеєва',
      genre: 'Поп, електропоп',
      description: 'Співачка, учасниця гурту "Время и Стекло"',
      imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Nadya_Dorofeeva_%282017%29.jpg/300px-Nadya_Dorofeeva_%282017%29.jpg',
      years: 'нар. 1990',
      hits: ['Тролль', 'Гарно так', 'Девочки как девочки'],
    ),
    Singer(
      name: 'Оксана Муха',
      genre: 'Поп, фолк',
      description: 'Співачка, учасниця гурту "КАЗКА"',
      imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/%D0%9E%D0%BA%D1%81%D0%B0%D0%BD%D0%B0_%D0%9C%D1%83%D1%85%D0%B0_2019.jpg/300px-%D0%9E%D0%BA%D1%81%D0%B0%D0%BD%D0%B0_%D0%9C%D1%83%D1%85%D0%B0_2019.jpg',
      years: 'нар. 1983',
      hits: ['На небі', 'Ой смерека', 'Дикі танці'],
    ),
    Singer(
      name: 'Ірина Білик',
      genre: 'Поп, рок',
      description: 'Співачка, композиторка, поетеса',
      imageUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Iryna_Bilyk_2012.jpg/300px-Iryna_Bilyk_2012.jpg',
      years: 'нар. 1970',
      hits: ['Так просто', 'Я народилася', 'Любовь. Яд'],
    ),
  ];

  int selectedIndex = -1; // Початково жоден співак не вибраний

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Українські співаки'),
        centerTitle: true,
      ),
      body: Column(
        children: [
          // Панель з інформацією про вибраного співака
          Container(
            padding: const EdgeInsets.all(16),
            color: Colors.blue[50],
            child: Row(
              children: [
                const Icon(Icons.info_outline, color: Colors.blue),
                const SizedBox(width: 10),
                Expanded(
                  child: Text(
                    selectedIndex == -1
                        ? 'Оберіть співака зі списку'
                        : 'Обрано: ${singers[selectedIndex].name}',
                    style: const TextStyle(
                      fontSize: 18,
                      fontWeight: FontWeight.w500,
                      color: Colors.blue,
                    ),
                  ),
                ),
              ],
            ),
          ),
          
          // Список співаків
          Expanded(
            child: ListView.separated(
              padding: const EdgeInsets.all(16),
              itemCount: singers.length,
              separatorBuilder: (context, index) => Divider(
                height: 20,
                color: Colors.grey[300],
                thickness: 1,
              ),
              itemBuilder: (context, index) {
                final singer = singers[index];
                return GestureDetector(
                  onTap: () {
                    setState(() {
                      selectedIndex = index;
                    });
                  },
                  child: Container(
                    decoration: BoxDecoration(
                      color: selectedIndex == index 
                          ? Colors.blue[100] 
                          : Colors.white,
                      borderRadius: BorderRadius.circular(12),
                      border: Border.all(
                        color: selectedIndex == index 
                            ? Colors.blue 
                            : Colors.grey[300]!,
                        width: selectedIndex == index ? 2 : 1,
                      ),
                    ),
                    padding: const EdgeInsets.all(12),
                    child: Row(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        // Зображення співака
                        ClipRRect(
                          borderRadius: BorderRadius.circular(8),
                          child: Image.network(
                            singer.imageUrl,
                            width: 80,
                            height: 80,
                            fit: BoxFit.cover,
                            loadingBuilder: (context, child, loadingProgress) {
                              if (loadingProgress == null) return child;
                              return Container(
                                width: 80,
                                height: 80,
                                color: Colors.grey[200],
                                child: const Center(
                                  child: CircularProgressIndicator(),
                                ),
                              );
                            },
                            errorBuilder: (context, error, stackTrace) {
                              return Container(
                                width: 80,
                                height: 80,
                                color: Colors.grey[200],
                                child: const Icon(
                                  Icons.person,
                                  size: 40,
                                  color: Colors.grey,
                                ),
                              );
                            },
                          ),
                        ),
                        
                        const SizedBox(width: 16),
                        
                        // Інформація про співака
                        Expanded(
                          child: Column(
                            crossAxisAlignment: CrossAxisAlignment.start,
                            children: [
                              // Ім'я та роки життя
                              Row(
                                children: [
                                  Text(
                                    singer.name,
                                    style: const TextStyle(
                                      fontSize: 18,
                                      fontWeight: FontWeight.bold,
                                    ),
                                  ),
                                  const SizedBox(width: 8),
                                  Text(
                                    singer.years,
                                    style: TextStyle(
                                      fontSize: 14,
                                      color: Colors.grey[600],
                                      fontStyle: FontStyle.italic,
                                    ),
                                  ),
                                ],
                              ),
                              
                              const SizedBox(height: 4),
                              
                              // Жанр
                              Text(
                                'Жанр: ${singer.genre}',
                                style: TextStyle(
                                  fontSize: 14,
                                  color: Colors.grey[700],
                                ),
                              ),
                              
                              const SizedBox(height: 4),
                              
                              // Опис
                              Text(
                                singer.description,
                                style: TextStyle(
                                  fontSize: 14,
                                  color: Colors.grey[600],
                                ),
                                maxLines: 2,
                                overflow: TextOverflow.ellipsis,
                              ),
                              
                              const SizedBox(height: 8),
                              
                              // Хіти
                              Wrap(
                                spacing: 6,
                                children: singer.hits
                                    .map((hit) => Chip(
                                          label: Text(
                                            hit,
                                            style: const TextStyle(fontSize: 12),
                                          ),
                                          backgroundColor: Colors.blue[50],
                                          visualDensity: VisualDensity.compact,
                                        ))
                                    .toList(),
                              ),
                            ],
                          ),
                        ),
                        
                        // Індикатор вибору
                        if (selectedIndex == index)
                          const Icon(
                            Icons.check_circle,
                            color: Colors.green,
                            size: 24,
                          ),
                      ],
                    ),
                  ),
                );
              },
            ),
          ),
          
          // Футер з інформацією
          Container(
            padding: const EdgeInsets.all(12),
            color: Colors.grey[100],
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Text(
                  'Всього співаків: ${singers.length}',
                  style: TextStyle(
                    fontSize: 14,
                    color: Colors.grey[700],
                  ),
                ),
                Text(
                  'Обрано: ${selectedIndex == -1 ? "немає" : selectedIndex + 1}',
                  style: TextStyle(
                    fontSize: 14,
                    color: Colors.grey[700],
                  ),
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}
